{"ast":null,"code":"var _jsxFileName = \"D:\\\\training\\\\react\\\\5\\\\serv_rout_db\\\\client\\\\src\\\\Component\\\\Home.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport { Link } from 'react-router-dom';\nimport Header from './Header';\nimport Sidebar from \"./Sidebar\";\nimport ProductsList from \"./ProductsList\";\n\nclass Home extends Component {\n  constructor(props) {\n    super(props);\n\n    this.getCategoryFromDb = () => {\n      fetch('http://localhost:3001/api/category').then(data => data.json()).then(data => this.setState({\n        categories: data\n      })).catch(err => {\n        console.log(\"Failed Getting category\");\n      });\n    };\n\n    this.getProductFromDb = () => {\n      fetch('http://localhost:3001/api/product').then(res => res.json()).then(res => this.setState({\n        products: res\n      })).catch(err => {\n        console.log(\"Failed Getting product\");\n      });\n    };\n\n    this.setCurrentCategory = value => {\n      this.setState({\n        currentCategory: value\n      });\n    };\n\n    this.state = {\n      products: [],\n      categories: [],\n      currentCategory: \"Notebook\",\n      cart: [],\n      intervalIsSet: false\n    };\n  }\n\n  componentDidMount() {\n    if (this.state.categories.length === 0) {\n      this.getCategoryFromDb(); // this.setState({currentCategory: this.props.categories[0].title})\n    }\n\n    this.getProductFromDb();\n\n    if (!this.state.intervalIsSet) {\n      let interval = setInterval(this.getCategoryFromDb, 1000);\n      this.setState({\n        intervalIsSet: interval\n      });\n    }\n  } // never let a process live forever\n  // always kill a process everytime we are done using it\n\n\n  componentWillUnmount() {\n    if (this.state.intervalIsSet) {\n      clearInterval(this.state.intervalIsSet);\n      this.setState({\n        intervalIsSet: null\n      });\n    }\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }, React.createElement(Header, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"sidebar\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, React.createElement(Sidebar, {\n      categories: this.state.categories,\n      setCurrentCategory: this.setCurrentCategory,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, React.createElement(ProductsList, {\n      products: this.state.products,\n      currentCategory: this.state.currentCategory,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    })));\n  }\n\n}\n\nexport default Home;","map":{"version":3,"sources":["D:\\training\\react\\5\\serv_rout_db\\client\\src\\Component\\Home.js"],"names":["React","Component","axios","Link","Header","Sidebar","ProductsList","Home","constructor","props","getCategoryFromDb","fetch","then","data","json","setState","categories","catch","err","console","log","getProductFromDb","res","products","setCurrentCategory","value","currentCategory","state","cart","intervalIsSet","componentDidMount","length","interval","setInterval","componentWillUnmount","clearInterval","render"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\nimport axios from 'axios';\r\nimport { Link } from 'react-router-dom';\r\nimport Header from './Header';\r\nimport Sidebar from \"./Sidebar\";\r\nimport ProductsList from \"./ProductsList\";\r\n\r\n\r\n    class Home extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            products: [],\r\n            categories: [],\r\n            currentCategory: \"Notebook\",\r\n            cart: [],\r\n            intervalIsSet: false\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (this.state.categories.length === 0) {\r\n            this.getCategoryFromDb();\r\n            // this.setState({currentCategory: this.props.categories[0].title})\r\n        }\r\n        this.getProductFromDb();\r\n        if (!this.state.intervalIsSet) {\r\n            let interval = setInterval(this.getCategoryFromDb, 1000);\r\n            this.setState({ intervalIsSet: interval });\r\n        }\r\n    }\r\n\r\n    // never let a process live forever\r\n    // always kill a process everytime we are done using it\r\n    componentWillUnmount() {\r\n        if (this.state.intervalIsSet) {\r\n            clearInterval(this.state.intervalIsSet);\r\n            this.setState({ intervalIsSet: null });\r\n        }\r\n    }\r\n\r\n    getCategoryFromDb = () => {\r\n        fetch('http://localhost:3001/api/category')\r\n            .then((data) => data.json())\r\n            .then((data) => this.setState({categories: data}))\r\n            .catch(err => {\r\n                console.log(\"Failed Getting category\")\r\n            })\r\n\r\n\r\n    };\r\n\r\n    getProductFromDb = () => {\r\n        fetch('http://localhost:3001/api/product')\r\n            .then((res) => res.json())\r\n            .then((res) => this.setState({products: res}))\r\n            .catch(err => {\r\n                console.log(\"Failed Getting product\");\r\n            })\r\n    };\r\n\r\n    setCurrentCategory = (value) => {\r\n        this.setState({ currentCategory: value })\r\n    };\r\n\r\n\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <Header />\r\n\r\n                <div className={\"sidebar\"}><Sidebar categories={this.state.categories} setCurrentCategory={this.setCurrentCategory}/></div>\r\n                <div className={\"content\"}><ProductsList products={this.state.products} currentCategory={this.state.currentCategory}/></div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Home"]},"metadata":{},"sourceType":"module"}