{"ast":null,"code":"var _jsxFileName = \"D:\\\\training\\\\react\\\\5\\\\serv_rout_db\\\\client\\\\src\\\\App.js\";\nimport React, { Component } from 'react'; // import axios from 'axios';\n\nimport './App.css';\nimport Header from './Component/Header';\nimport Sidebar from './Component/Sidebar';\nimport ProductsList from \"./Component/ProductsList\";\nimport { Router, Route, Switch } from \"react-router-dom\";\nimport { routes } from \"./router\";\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n\n    this.getCategoryFromDb = () => {\n      fetch('http://localhost:3001/api/category').then(data => data.json()).then(data => this.setState({\n        categories: data\n      }));\n    };\n\n    this.getProductFromDb = () => {\n      fetch('http://localhost:3001/api/product').then(res => res.json()).then(res => this.setState({\n        products: res\n      }));\n    };\n\n    this.setCurrentCategory = value => {\n      this.setState({\n        currentCategory: value\n      });\n    };\n\n    this.state = {\n      products: [],\n      categories: [],\n      currentCategory: \"Notebook\",\n      cart: [],\n      intervalIsSet: false\n    }; // this.getAllCategorys();\n    // this.getProductFromDb();\n  } // when component mounts, first thing it does is fetch all existing data in our db\n  // then we incorporate a polling logic so that we can easily see if our db has\n  // changed and implement those changes into our UI\n\n\n  componentDidMount() {\n    if (this.state.categories.length === 0) {\n      this.getCategoryFromDb(); // this.setState({currentCategory: this.props.categories[0].title})\n    }\n\n    this.getProductFromDb();\n\n    if (!this.state.intervalIsSet) {\n      let interval = setInterval(this.getCategoryFromDb, 1000);\n      this.setState({\n        intervalIsSet: interval\n      });\n    }\n  } // never let a process live forever\n  // always kill a process everytime we are done using it\n\n\n  componentWillUnmount() {\n    if (this.state.intervalIsSet) {\n      clearInterval(this.state.intervalIsSet);\n      this.setState({\n        intervalIsSet: null\n      });\n    }\n  }\n\n  // // our put method that uses our backend api\n  // // to create new query into our data base\n  // putDataToDB = (title) => {\n  //     let currentIds = this.state.data.map((data) => data.id);\n  //     let idToBeAdded = 0;\n  //     while (currentIds.includes(idToBeAdded)) {\n  //         ++idToBeAdded;\n  //     }\n  //\n  //     axios.post('http://localhost:3001/api/category', {\n  //         title: title,\n  //     });\n  // };\n  //\n  // // our delete method that uses our backend api\n  // // to remove existing database information\n  // deleteFromDB = (idTodelete) => {\n  //     parseInt(idTodelete);\n  //     let objIdToDelete = null;\n  //     this.state.data.forEach((dat) => {\n  //         if (dat.id === +idTodelete) {\n  //             objIdToDelete = dat._id;\n  //         }\n  //     });\n  //\n  //     axios.delete('http://localhost:3001/api/deleteData', {\n  //         data: {\n  //             id: objIdToDelete,\n  //         },\n  //     });\n  // };\n  //\n  // // our update method that uses our backend api\n  // // to overwrite existing data base information\n  // updateDB = (idToUpdate, updateToApply) => {\n  //     let objIdToUpdate = null;\n  //     parseInt(idToUpdate);\n  //     this.state.data.forEach((dat) => {\n  //         if (dat.id === +idToUpdate) {\n  //             objIdToUpdate = dat._id;\n  //         }\n  //     });\n  //\n  //     axios.post('http://localhost:3001/api/updateData', {\n  //         id: objIdToUpdate,\n  //         update: { message: updateToApply },\n  //     });\n  // };\n  //\n  // // here is our UI\n  // // it is easy to understand their functions when you\n  // // see them render into our screen\n  render() {\n    // const { categories } = this.state\n    return React.createElement(\"section\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"header\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, React.createElement(Header, {\n      cart: this.state.cart,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"sidebar\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, React.createElement(Sidebar, {\n      categories: this.state.categories,\n      setCurrentCategory: this.setCurrentCategory,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, React.createElement(ProductsList, {\n      products: this.state.products,\n      currentCategory: this.state.currentCategory,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    })), React.createElement(Router, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/about\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, \"About\")))));\n  }\n\n} // function About() {\n//     return (\n//         <div>\n//             <h2>About</h2>\n//         </div>\n//     );\n// }\n\n\nexport default App;","map":{"version":3,"sources":["D:\\training\\react\\5\\serv_rout_db\\client\\src\\App.js"],"names":["React","Component","Header","Sidebar","ProductsList","Router","Route","Switch","routes","App","constructor","props","getCategoryFromDb","fetch","then","data","json","setState","categories","getProductFromDb","res","products","setCurrentCategory","value","currentCategory","state","cart","intervalIsSet","componentDidMount","length","interval","setInterval","componentWillUnmount","clearInterval","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\n// import axios from 'axios';\nimport './App.css';\nimport Header from './Component/Header'\nimport Sidebar from './Component/Sidebar'\nimport ProductsList from \"./Component/ProductsList\";\nimport { Router, Route, Switch } from \"react-router-dom\";\nimport {routes} from \"./router\";\n\nclass App extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            products: [],\n            categories: [],\n            currentCategory: \"Notebook\",\n            cart: [],\n            intervalIsSet: false\n        };\n\n        // this.getAllCategorys();\n        // this.getProductFromDb();\n    }\n\n    // when component mounts, first thing it does is fetch all existing data in our db\n    // then we incorporate a polling logic so that we can easily see if our db has\n    // changed and implement those changes into our UI\n    componentDidMount() {\n        if (this.state.categories.length === 0) {\n            this.getCategoryFromDb();\n            // this.setState({currentCategory: this.props.categories[0].title})\n        }\n        this.getProductFromDb();\n        if (!this.state.intervalIsSet) {\n            let interval = setInterval(this.getCategoryFromDb, 1000);\n            this.setState({ intervalIsSet: interval });\n        }\n    }\n\n    // never let a process live forever\n    // always kill a process everytime we are done using it\n    componentWillUnmount() {\n        if (this.state.intervalIsSet) {\n            clearInterval(this.state.intervalIsSet);\n            this.setState({ intervalIsSet: null });\n        }\n    }\n\n    getCategoryFromDb = () => {\n        fetch('http://localhost:3001/api/category')\n            .then((data) => data.json())\n            .then((data) => this.setState({categories: data}))\n    };\n\n    getProductFromDb = () => {\n        fetch('http://localhost:3001/api/product')\n            .then((res) => res.json())\n            .then((res) => this.setState({products: res}))\n    };\n\n    setCurrentCategory = (value) => {\n        this.setState({ currentCategory: value })\n    }\n\n    // // our put method that uses our backend api\n    // // to create new query into our data base\n    // putDataToDB = (title) => {\n    //     let currentIds = this.state.data.map((data) => data.id);\n    //     let idToBeAdded = 0;\n    //     while (currentIds.includes(idToBeAdded)) {\n    //         ++idToBeAdded;\n    //     }\n    //\n    //     axios.post('http://localhost:3001/api/category', {\n    //         title: title,\n    //     });\n    // };\n    //\n    // // our delete method that uses our backend api\n    // // to remove existing database information\n    // deleteFromDB = (idTodelete) => {\n    //     parseInt(idTodelete);\n    //     let objIdToDelete = null;\n    //     this.state.data.forEach((dat) => {\n    //         if (dat.id === +idTodelete) {\n    //             objIdToDelete = dat._id;\n    //         }\n    //     });\n    //\n    //     axios.delete('http://localhost:3001/api/deleteData', {\n    //         data: {\n    //             id: objIdToDelete,\n    //         },\n    //     });\n    // };\n    //\n    // // our update method that uses our backend api\n    // // to overwrite existing data base information\n    // updateDB = (idToUpdate, updateToApply) => {\n    //     let objIdToUpdate = null;\n    //     parseInt(idToUpdate);\n    //     this.state.data.forEach((dat) => {\n    //         if (dat.id === +idToUpdate) {\n    //             objIdToUpdate = dat._id;\n    //         }\n    //     });\n    //\n    //     axios.post('http://localhost:3001/api/updateData', {\n    //         id: objIdToUpdate,\n    //         update: { message: updateToApply },\n    //     });\n    // };\n    //\n    // // here is our UI\n    // // it is easy to understand their functions when you\n    // // see them render into our screen\n    render() {\n        // const { categories } = this.state\n        return (\n\n                <section>\n                    <div className={\"header\"}><Header cart={this.state.cart}/></div>\n                    <div className={\"sidebar\"}><Sidebar categories={this.state.categories} setCurrentCategory={this.setCurrentCategory}/></div>\n                    <div className={\"content\"}><ProductsList products={this.state.products} currentCategory={this.state.currentCategory}/></div>\n                    <Router>\n                    <div>\n                        <li>\n                            <Link to=\"/about\">About</Link>\n                        </li>\n                    </div>\n                        \n                    </Router>\n                </section>\n\n    );\n    }\n}\n\n// function About() {\n//     return (\n//         <div>\n//             <h2>About</h2>\n//         </div>\n//     );\n// }\n\nexport default App;"]},"metadata":{},"sourceType":"module"}