{"ast":null,"code":"var _jsxFileName = \"D:\\\\training\\\\react\\\\5\\\\serv_rout_db\\\\client\\\\src\\\\App.js\";\nimport React, { Component } from 'react'; // import axios from 'axios';\n\nimport './App.css'; // import Header from './Component/Header'\n// import Content from './Component/Content'\n\nimport Sidebar from './Component/Sidebar';\nimport Content from \"./Component/Content\";\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n\n    this.getCategoryFromDb = () => {\n      // let arr =[]\n      fetch('http://localhost:3001/api/category').then(data => data.json()).then(data => this.setState({\n        categories: data\n      }));\n    };\n\n    this.getProductFromDb = () => {\n      // let arr =[]\n      fetch('http://localhost:3001/api/product').then(res => res.json()).then(res => this.setState({\n        products: res\n      }));\n    };\n\n    this.setCurrentCategory = value => {\n      this.setState({\n        currentCategory: value\n      });\n    };\n\n    this.state = {\n      products: [],\n      categories: [],\n      currentCategory: \"Notebook\",\n      cart: []\n    }; // this.getAllCategorys();\n    // this.getProductFromDb();\n  } // when component mounts, first thing it does is fetch all existing data in our db\n  // then we incorporate a polling logic so that we can easily see if our db has\n  // changed and implement those changes into our UI\n\n\n  componentDidMount() {\n    if (this.state.categories.length === 0) {\n      this.getCategoryFromDb(); // this.setState({currentCategory: this.props.categories[0].title})\n    }\n\n    this.getProductFromDb();\n    console.log(this.state.products.length);\n  } // never let a process live forever\n  // always kill a process everytime we are done using it\n\n\n  componentWillUnmount() {\n    if (this.state.intervalIsSet) {\n      clearInterval(this.state.intervalIsSet);\n      this.setState({\n        intervalIsSet: null\n      });\n    }\n  } // just a note, here, in the front end, we use the id key of our data object\n  // in order to identify which we want to Update or delete.\n  // for our back end, we use the object id assigned by MongoDB to modify\n  // data base entries\n  // our first get method that uses our backend api to\n  // fetch data from our data base\n\n\n  // // our put method that uses our backend api\n  // // to create new query into our data base\n  // putDataToDB = (title) => {\n  //     let currentIds = this.state.data.map((data) => data.id);\n  //     let idToBeAdded = 0;\n  //     while (currentIds.includes(idToBeAdded)) {\n  //         ++idToBeAdded;\n  //     }\n  //\n  //     axios.post('http://localhost:3001/api/category', {\n  //         title: title,\n  //     });\n  // };\n  //\n  // // our delete method that uses our backend api\n  // // to remove existing database information\n  // deleteFromDB = (idTodelete) => {\n  //     parseInt(idTodelete);\n  //     let objIdToDelete = null;\n  //     this.state.data.forEach((dat) => {\n  //         if (dat.id === +idTodelete) {\n  //             objIdToDelete = dat._id;\n  //         }\n  //     });\n  //\n  //     axios.delete('http://localhost:3001/api/deleteData', {\n  //         data: {\n  //             id: objIdToDelete,\n  //         },\n  //     });\n  // };\n  //\n  // // our update method that uses our backend api\n  // // to overwrite existing data base information\n  // updateDB = (idToUpdate, updateToApply) => {\n  //     let objIdToUpdate = null;\n  //     parseInt(idToUpdate);\n  //     this.state.data.forEach((dat) => {\n  //         if (dat.id === +idToUpdate) {\n  //             objIdToUpdate = dat._id;\n  //         }\n  //     });\n  //\n  //     axios.post('http://localhost:3001/api/updateData', {\n  //         id: objIdToUpdate,\n  //         update: { message: updateToApply },\n  //     });\n  // };\n  //\n  // // here is our UI\n  // // it is easy to understand their functions when you\n  // // see them render into our screen\n  render() {\n    // const { categories } = this.state\n    return React.createElement(\"section\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"sidebar\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, React.createElement(Sidebar, {\n      categories: this.state.categories,\n      setCurrentCategory: this.setCurrentCategory,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, React.createElement(Content, {\n      products: this.state.products,\n      currentCategory: this.state.currentCategory,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    })));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["D:\\training\\react\\5\\serv_rout_db\\client\\src\\App.js"],"names":["React","Component","Sidebar","Content","App","constructor","props","getCategoryFromDb","fetch","then","data","json","setState","categories","getProductFromDb","res","products","setCurrentCategory","value","currentCategory","state","cart","componentDidMount","length","console","log","componentWillUnmount","intervalIsSet","clearInterval","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\n// import axios from 'axios';\nimport './App.css';\n// import Header from './Component/Header'\n// import Content from './Component/Content'\nimport Sidebar from './Component/Sidebar'\nimport Content from \"./Component/Content\";\n\nclass App extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            products: [],\n            categories: [],\n            currentCategory: \"Notebook\",\n            cart: []\n        };\n\n        // this.getAllCategorys();\n        // this.getProductFromDb();\n    }\n\n    // when component mounts, first thing it does is fetch all existing data in our db\n    // then we incorporate a polling logic so that we can easily see if our db has\n    // changed and implement those changes into our UI\n    componentDidMount() {\n        if (this.state.categories.length === 0) {\n            this.getCategoryFromDb();\n            // this.setState({currentCategory: this.props.categories[0].title})\n        }\n\n            this.getProductFromDb();\n\n        console.log(this.state.products.length)\n    }\n\n    // never let a process live forever\n    // always kill a process everytime we are done using it\n    componentWillUnmount() {\n        if (this.state.intervalIsSet) {\n            clearInterval(this.state.intervalIsSet);\n            this.setState({ intervalIsSet: null });\n        }\n\n    }\n\n    // just a note, here, in the front end, we use the id key of our data object\n    // in order to identify which we want to Update or delete.\n    // for our back end, we use the object id assigned by MongoDB to modify\n    // data base entries\n\n    // our first get method that uses our backend api to\n    // fetch data from our data base\n    getCategoryFromDb = () => {\n        // let arr =[]\n        fetch('http://localhost:3001/api/category')\n            .then((data) => data.json())\n            .then((data) => this.setState({categories: data}))\n    };\n\n    getProductFromDb = () => {\n        // let arr =[]\n        fetch('http://localhost:3001/api/product')\n            .then((res) => res.json())\n            .then((res) => this.setState({products: res}))\n    };\n\n    setCurrentCategory = (value) => {\n        this.setState({ currentCategory: value })\n    }\n\n    // // our put method that uses our backend api\n    // // to create new query into our data base\n    // putDataToDB = (title) => {\n    //     let currentIds = this.state.data.map((data) => data.id);\n    //     let idToBeAdded = 0;\n    //     while (currentIds.includes(idToBeAdded)) {\n    //         ++idToBeAdded;\n    //     }\n    //\n    //     axios.post('http://localhost:3001/api/category', {\n    //         title: title,\n    //     });\n    // };\n    //\n    // // our delete method that uses our backend api\n    // // to remove existing database information\n    // deleteFromDB = (idTodelete) => {\n    //     parseInt(idTodelete);\n    //     let objIdToDelete = null;\n    //     this.state.data.forEach((dat) => {\n    //         if (dat.id === +idTodelete) {\n    //             objIdToDelete = dat._id;\n    //         }\n    //     });\n    //\n    //     axios.delete('http://localhost:3001/api/deleteData', {\n    //         data: {\n    //             id: objIdToDelete,\n    //         },\n    //     });\n    // };\n    //\n    // // our update method that uses our backend api\n    // // to overwrite existing data base information\n    // updateDB = (idToUpdate, updateToApply) => {\n    //     let objIdToUpdate = null;\n    //     parseInt(idToUpdate);\n    //     this.state.data.forEach((dat) => {\n    //         if (dat.id === +idToUpdate) {\n    //             objIdToUpdate = dat._id;\n    //         }\n    //     });\n    //\n    //     axios.post('http://localhost:3001/api/updateData', {\n    //         id: objIdToUpdate,\n    //         update: { message: updateToApply },\n    //     });\n    // };\n    //\n    // // here is our UI\n    // // it is easy to understand their functions when you\n    // // see them render into our screen\n    render() {\n        // const { categories } = this.state\n        return (\n            <section>\n                <div className={\"sidebar\"}><Sidebar categories={this.state.categories} setCurrentCategory={this.setCurrentCategory}/></div>\n                <div className={\"content\"}><Content products={this.state.products} currentCategory={this.state.currentCategory}/></div>\n            </section>\n    );\n    }\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}